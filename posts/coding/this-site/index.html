<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/styles.15afead8077417a4fb0a.css"/><link rel="shortcut icon" href="/favicon.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#00D1B2"/><title data-react-helmet="true">How this Site was Built</title></head><body><div id="b"><div class="container"><div class="column is-8 is-offset-2"><nav class="breadcrumb is-marginless is-centered" aria-label="breadcrumbs"><ul><li class=""><a href="/">Home</a></li><li class=""><a href="/posts">Posts</a></li><li class=""><a href="/posts/coding">Coding</a></li><li class="is-active"><a href="/posts/coding/this-site">This Site</a></li></ul></nav><div class="section titles-section"><h1 class="title is-2">How this Site was Built</h1><span class="has-text-grey"><time dateTime="2019-05-13">May 13, 2019</time> Â· 4 min read</span></div><div class="content is-medium"><p>You probably don't notice, but this site is nearly as fast as it can possibly be! I did that because I value your data bill and places which are just now getting emerging internet. I'm also a minimalist.</p>
<figure>
<p><span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 446px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 75.33632286995517%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAABqw+VZUiCn//EABkQAAMBAQEAAAAAAAAAAAAAAAABAhESIf/aAAgBAQABBQKpN8zR3LNZ0z//xAAYEQADAQEAAAAAAAAAAAAAAAAAAhNBUf/aAAgBAwEBPwGSaRXp/8QAGBEAAwEBAAAAAAAAAAAAAAAAABNRAQL/2gAIAQIBAT8BZ1Bmw//EABoQAAICAwAAAAAAAAAAAAAAAAEQABEhQWH/2gAIAQEABj8CmKB69L//xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAxUWGB/9oACAEBAAE/IYwsXNIYe6AULu4N9zfiPrifn7v/2gAMAwEAAgADAAAAEIv/AP/EABgRAAMBAQAAAAAAAAAAAAAAAAABESGh/9oACAEDAQE/EFbQ6Zwf/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERMUH/2gAIAQIBAT8QloLUf//EAB8QAQADAAAHAQAAAAAAAAAAAAEAESExQVFhcYGhsf/aAAgBAQABPxBarNmYw+AVw0HyHQdVPOBbAUDE9y1rvFf5ADfAVT//2Q=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px #F5F5F5;"
        alt="Road runner"
        title=""
        src="/static/f069b29a2585ef0f736ccf70cc227877/ae4e8/road-runner.jpg"
        srcset="/static/f069b29a2585ef0f736ccf70cc227877/16b37/road-runner.jpg 240w,
/static/f069b29a2585ef0f736ccf70cc227877/ae4e8/road-runner.jpg 446w"
        sizes="(max-width: 446px) 100vw, 446px"
      />
  </span></p>
<figcaption>This is exactly how my site gets delivered to you.</figcaption>
</figure>
<p>I didn't want to make any compromises on my developer experience, though. Writing should be fun and easy (this is a creative outlet, after all!) and deployment should only take one click. That was my main gripe with my the last version of this site.</p>
<p>Enter <a href="https://gatsbyjs.org">Gatsby</a>, a framework to pipeline data (like <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a>) onto webpages using templates. However, the 200kb Gatsby weighs in at for Hello World is just to big compared to the 10kb for my last Jekyll blog. On emerging 3G that's still 2-3 seconds to load 200kb for what is maybe only 5kb of content!</p>
<figure>
<p><span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAGuLtO3tIRN8BbrAn//xAAaEAEAAgMBAAAAAAAAAAAAAAADAQIAERIh/9oACAEBAAEFAmb2qxsWhD4yp6uRdQpVvhF3MRqP/8QAFREBAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQMBAT8BIf/EABURAQEAAAAAAAAAAAAAAAAAABAB/9oACAECAQE/ASH/xAAgEAACAgEEAwEAAAAAAAAAAAABAgARIRIiMUEDUWHB/9oACAEBAAY/AjuKouMckzazofpsS+D3PIpzmyP0StOtTwYxTC3iXkMOxCGZiPUoT//EAB0QAQACAQUBAAAAAAAAAAAAAAEAESExQWFxgVH/2gAIAQEAAT8hZEQWfKJ1SG27hJ1oDmGQmr3NbckrUCXahX2a8l+ZkOwNTAtqW2wwACg0J//aAAwDAQACAAMAAAAQYP8APP/EABgRAQADAQAAAAAAAAAAAAAAAAEAEBEx/9oACAEDAQE/EAMiGziv/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQETH/2gAIAQIBAT8QAyIbOK//xAAeEAEAAgIDAAMAAAAAAAAAAAABABEhQTFRYXGBof/aAAgBAQABPxD7PDYCaDbBX5PbDoV+kZsDkYB15Fe/GJ58TZuLjGQu2WnFbHiEqasVyALz8MJGFuqfL6j4ThovaAQMAqAoCf/Z'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px #F5F5F5;"
        alt="Gatsby logo"
        title=""
        src="/static/3811e0dbfadd819b9e4b275b6eb432e4/b9af0/gatsby-logo.jpg"
        srcset="/static/3811e0dbfadd819b9e4b275b6eb432e4/16b37/gatsby-logo.jpg 240w,
/static/3811e0dbfadd819b9e4b275b6eb432e4/b9af0/gatsby-logo.jpg 400w"
        sizes="(max-width: 400px) 100vw, 400px"
      />
  </span></p>
<figcaption>
<p><a href="https://www.gatsbyjs.org">GatsbyJS</a> is a nice way to write modern React+JSX without compromising much on SEO and speed.</figcaption></p>
</figure>
<p>I didn't just blindly adopt Gatsby, though. I value understanding how a system works completely, and there were too many things I didn't understand. I wanted to NOT include JS on pages that didn't need them and to use <a href="https://preactjs.com">Preact</a> to make the ones that needed JS (like my <a href="/posts/money/early-retirement">retirement projector</a>) even lighter. No one else seems to want that. Everyone else seems to be okay with the bloat.</p>
<p>I wanted to optimize that, so I got down and dirty for two weeks and ripped Gatsby apart to include the bare minimum needed to render. The result is what you now see.</p>
<p>This page is proof that with some webpack customization and learning Gatsby internals, it's possible to make tiny static pages IN REACT that don't even ship React.js to the browser!
It's what I've been looking for since it's the most elegant and customizable way to control content I ship to your browser.
I understand how every line of HTML, CSS, and Javascript got there (preferably without Javascript), and that makes me want to write more content with higher quality, which should be the whole point of the internet.</p>
<p>If you're into the technical aspects, check out the section below!</p>
<p><span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAcO3nTlUtWymRvAX/8QAGxAAAwEAAwEAAAAAAAAAAAAAAQIDAAQRISL/2gAIAQEAAQUCiwTPVOsvk4/OpMgwYqr8hhhViP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAEDBQEBAAAAAAAAAAAAAAEAESECEDFRcTKR/9oACAEBAAY/ApxxOBPLE7RPoNgINTBDrfUzU/Lf/8QAHRABAAMAAgMBAAAAAAAAAAAAAQARIUGBMVFhcf/aAAgBAQABPyHYo9kwXQ5EE8pKIBeD8l0poOSJiAgevkEgAdxcSOxBxWf/2gAMAwEAAgADAAAAEJAo/P/EABcRAQEBAQAAAAAAAAAAAAAAAAEAEBH/2gAIAQMBAT8Q5jAX/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQETH/2gAIAQIBAT8QZcPT/8QAIBABAAICAgEFAAAAAAAAAAAAAQARITFBYcFRgZGh8P/aAAgBAQABPxBC92yiv315jWDYMDuz4iihbnBqI9sol9kvmELvZBTxh39wixFbq+DcdRKigcYgAqCjA8+j+qDRuu5//9k='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px #F5F5F5;"
        alt="Show me the source"
        title=""
        src="/static/b12e8c54fcb1ce19f73bca40de7c3492/b9af0/show-me-the-source-yoda.jpg"
        srcset="/static/b12e8c54fcb1ce19f73bca40de7c3492/16b37/show-me-the-source-yoda.jpg 240w,
/static/b12e8c54fcb1ce19f73bca40de7c3492/b9af0/show-me-the-source-yoda.jpg 400w"
        sizes="(max-width: 400px) 100vw, 400px"
      />
  </span></p>
<h1>How I Made the Site</h1>
<h3>Gatsby Internals I Tore Apart</h3>
<p>Everyone loves a great tear. Gatsby's source was actually pretty clean and focused a lot on browser and cross-platform compatibility.</p>
<ul>
<li><a href="https://github.com/thesmartwon/thesmartwon.com/blob/master/src/app.js">app.js</a> (webpack entry point for development)</li>
<li><a href="https://github.com/thesmartwon/thesmartwon.com/blob/master/src/production-app.js">production-app.js</a> (webpack entry point for production)</li>
<li><a href="https://github.com/thesmartwon/thesmartwon.com/blob/master/src/static-entry.js#L79">static-entry.js</a> (webpack entry point for building html)</li>
<li><a href="https://github.com/thesmartwon/thesmartwon.com/blob/master/gatsby-node.js#L87">gatsby-node.js</a> (webpack config overriding)</li>
</ul>
<p>This site is all open source, take a look at the <a href="https://github.com/thesmartwon/thesmartwon.com">README.md</a> where I explain all of the above files!</p>
<p>I've already forgotten a lot of what I did a month ago, but look through the <a href="https://github.com/thesmartwon/thesmartwon.com/commits/master?after=b06392c74dca5c55b9c25bfdbd17a41b4f025c26+34">early commit history</a> to get the gist of it!</p>
<h3>Cool Features</h3>
<ul>
<li>React to build interactive and non-interactive pages.</li>
<li>Bulma as my CSS framework (I use SASS to just get what I need).</li>
<li>
<p><a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-remark">Gatsby-transformer-remark</a> which uses <a href="https://remark.js.org">remark</a> on <a href="https://github.com/thesmartwon/thesmartwon.com/tree/master/src/posts">my Markdown files.</a> I'm <a href="https://github.com/thesmartwon/thesmartwon.com/blob/master/src/posts/coding/this-site.md">writing in Markdown right now,</a> and OH BOY it's so much more fun than html!!</p>
<ul>
<li><a href="https://remark.js.org">Remark</a> a part of <a href="https://unified.js.org">unified</a> which is an extremely cool way to parse text into nearly any form you want (like html).</li>
</ul>
</li>
<li><a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-remark-images">Gatsby-remark-images</a> to resize all the images to reasonable sizes + add a container.</li>
<li><a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-manifest">Gatsby-remark-manifest</a> for the mobile navbar color and resizing my favicon.</li>
<li><a href="https://github.com/nfl/react-helmet">React-helmet</a> to set <code>&#x3C;head></code> per-page for things like the title. It's made by the NFL, who knew.</li>
</ul>
<figure>
<p><span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 68.53713915017839%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABU6AsZxf/xAAbEAABBAMAAAAAAAAAAAAAAAABAAIRIRIiMv/aAAgBAQABBQJpusd1ypJbLwv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAADAAIDAAAAAAAAAAAAAAAAARECITFBUf/aAAgBAQAGPwKxt+DyNSM0lTo5h//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVFx/9oACAEBAAE/IU2k31cEUQHG9QSDRkJZl4kvBE8uNUPgM//aAAwDAQACAAMAAAAQjB//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxCq/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREA/9oACAECAQE/ELR1N//EAB8QAQACAQQDAQAAAAAAAAAAAAERIQBRYXGhMUGBkf/aAAgBAQABPxASTBQbjHzH0ho231yc4ZAEAevzBFaISeNMkpAXUaiRZXWRiQLVHZn/2Q=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px #F5F5F5;"
        alt="Getting tackled"
        title=""
        src="/static/005b1e9d53881a1a8f4466e9313a1ee7/fc413/football.jpg"
        srcset="/static/005b1e9d53881a1a8f4466e9313a1ee7/16b37/football.jpg 240w,
/static/005b1e9d53881a1a8f4466e9313a1ee7/809c4/football.jpg 480w,
/static/005b1e9d53881a1a8f4466e9313a1ee7/fc413/football.jpg 960w,
/static/005b1e9d53881a1a8f4466e9313a1ee7/45150/football.jpg 1440w,
/static/005b1e9d53881a1a8f4466e9313a1ee7/330c1/football.jpg 1920w,
/static/005b1e9d53881a1a8f4466e9313a1ee7/b4128/football.jpg 2880w,
/static/005b1e9d53881a1a8f4466e9313a1ee7/00a1f/football.jpg 3083w"
        sizes="(max-width: 960px) 100vw, 960px"
      />
  </span></p>
<figcaption>React-helmet is a cool name coming from the NFL. I like American football.</figcaption>
</figure>
<ul>
<li><a href="https://preactjs.com/">Preact</a> because I don't need everything in React and I value my page size very highly. SPA frameworks are kinda a must-have nowadays for interactive pages.</li>
<li>To update the site, I just need to push and <a href="https://circleci.com/blog/deploying-documentation-to-github-pages-with-continuous-integration">CircleCI</a> takes care of the rest for me. How cool is that? </li>
</ul></div><div class="has-text-centered"><a href="#">Back to top</a> / <a href="/posts">View all posts</a></div></div></div></div></body></html>